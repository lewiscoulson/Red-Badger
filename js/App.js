var APP=APP||{};!function(){APP.Mars=function(a,b,c,d){this.x=parseInt(a,10),this.y=parseInt(b,10),this.squareSize=c,this.$el=d,this.initialised=!1},APP.Mars.prototype.setSize=function(){this.$el.css({width:(this.x+1)*this.squareSize,height:(this.y+1)*this.squareSize})},APP.Mars.prototype.plotGrid=function(){function a(a,b,c,d){var e=$("<span></span>",{"class":"mars-square"}).css({left:a+"px",bottom:b+"px",width:f.squareSize,height:f.squareSize}).attr("id",c+"_"+d);f.$el.append(e)}var b,c,d=(this.x+1)*this.squareSize,e=(this.y+1)*this.squareSize,f=this,g=0,h=0;for(b=0;d>b;b+=this.squareSize)for(c=0;e>c;c+=this.squareSize)g=b/this.squareSize,h=c/this.squareSize,a(b,c,g,h)},APP.Mars.prototype.init=function(){this.setSize(),this.plotGrid(),this.initialised=!0,APP.$mars=this.$el,APP.x=this.x,APP.y=this.y}}();var APP=APP||{};APP.scents=APP.scents||[],function(){APP.MartianRobot=function(a,b,c,d){this.x=parseInt(a,10),this.y=parseInt(b,10),this.o=c,this.input=d,this.addedToGrid=!1,this.$el=$("<span></span>",{"class":"martian-robot"}).attr("data-orientation",this.o),this.isLost=!1,this.isComplete=!1,this.$currentCell},APP.MartianRobot.prototype.addToGrid=function(){this.addedToGrid=!0;var a="#"+(this.x+"_"+this.y);this.$el.appendTo($(a))},APP.MartianRobot.prototype.moveBasedOnInput=function(){function a(){var a="#"+h.x+"_"+h.y;$(a).addClass("scent"),h.isLost=!0,APP.scents.push(h.x.toString()+h.y)}function b(){h.$el.remove()}function c(){var a=$(".martian-robot");h.$currentCell=$("#"+h.x+"_"+h.y),a.appendTo($(h.$currentCell)),a.attr("data-orientation",h.o)}function d(){var i=e[f],j=["N","E","S","W"],k=j.indexOf(h.o);if("L"==i)h.o=0===k?j[j.length-1]:j[k-1];else if("R"==i)h.o=k===j.length-1?j[0]:j[k+1];else if("F"==i){{var l=h.o;$(h.$currentCell)}"N"===l?-1==APP.scents.indexOf(h.x.toString()+h.y)&&h.y<=APP.y&&(h.y++,h.y>APP.y&&(h.y=APP.y,a(),b())):"E"===l?h.x<=APP.x&&(h.x+=1,h.x>APP.x&&(h.x=APP.x,APP.scent!==h.x.toString()+h.y&&(a(),b()))):"S"===l?h.y>=0&&(h.y-=1,h.y<0&&(h.y=0,APP.scent!==h.x.toString()+h.y&&(a(),b()))):"W"===l&&h.x>=0&&(h.x-=1,h.x<0&&(h.x=0,APP.scent!==h.x.toString()+h.y&&(a(),b())))}c(),f++,g>f&&!h.isLost?d():(h.isComplete=!0,b(),h.showOutput())}{var e=this.input.split(""),f=0,g=e.length,h=this;$(".mars")}d()},APP.MartianRobot.prototype.showOutput=function(){return this.x.toString()+this.y+this.o+(this.isLost===!0?"LOST":"")},APP.MartianRobot.prototype.init=function(){this.addToGrid(),this.moveBasedOnInput()}}(),function(){var a=$("form"),b=$(".mars"),c=$(".results");b.hide(),c.hide(),a.on("click","button",function(b){b.preventDefault();var c=$(".output"),d=a.find("#grid").val().split(""),e=a.find("#position-1").val().split(""),f=a.find("#input-1").val(),g=a.find("#position-2").val().split(""),h=a.find("#input-2").val(),i=a.find("#position-3").val().split(""),j=a.find("#input-3").val(),k=new APP.Mars(d[0],d[1],50,$(".mars"));k.init(),a.slideUp(500,function(){$(".mars").slideDown(500,function(){var a=new APP.MartianRobot(e[0],e[1],e[2],f);a.init(),c.append("<li>Martian Robot 1 - "+a.showOutput()+"</li>");var b=new APP.MartianRobot(g[0],g[1],g[2],h);b.init(),c.append("<li>Martian Robot 2 - "+b.showOutput()+"</li>");var d=new APP.MartianRobot(i[0],i[1],i[2],j);d.init(),c.append("<li>Martian Robot 3 - "+d.showOutput()+"</li>"),setTimeout(function(){$(".mars").slideUp(500,function(){$(".results").slideDown(500)})},2500)})})})}();